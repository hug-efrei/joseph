<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Book.Title }}</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: 'Georgia', serif; margin: 0; padding: 0; 
            background: #ffffff; color: #000000; padding-bottom: 40px;
        }

        header { 
            border-bottom: 3px solid #000; padding: 15px; background: #fff; 
            position: sticky; top: 0; z-index: 100;
        }
        .btn-back {
            text-decoration: none; color: #000; font-weight: bold; font-size: 1.2rem;
            display: inline-flex; align-items: center;
        }

        .container { padding: 20px; max-width: 800px; margin: 0 auto; }

        /* Section du haut : Cover + Infos */
        .top-section { display: flex; gap: 30px; margin-bottom: 30px; }

        .cover-wrapper { 
            width: 40%; max-width: 300px; flex-shrink: 0; 
            display: flex; justify-content: center; align-items: flex-start;
        }
        .cover { 
            width: 100%; height: auto; 
            box-shadow: 5px 5px 0px rgba(0,0,0,0.2); border: 1px solid #333; 
        }

        .info-wrapper { 
            flex-grow: 1; display: flex; flex-direction: column; 
        }
        
        h1 { margin: 0 0 10px 0; font-size: 1.8rem; line-height: 1.2; }
        
        /* Liens cliquables */
        .author a, .series a { text-decoration: underline; color: inherit; }
        
        .author { font-size: 1.3rem; font-style: italic; margin-bottom: 15px; color: #444; }
        .series { font-size: 1.1rem; font-weight: bold; color: #555; margin-bottom: 25px; }

        .btn-dl-large {
            background: #000; color: #fff; 
            padding: 15px; text-align: center; 
            text-decoration: none; font-weight: bold; font-size: 1.2rem; 
            text-transform: uppercase; display: block; margin-top: auto;
            border: 2px solid #000;
        }
        .btn-dl-large:active { background: #fff; color: #000; }

        /* Section Résumé */
        .synopsis {
            font-size: 1.1rem; line-height: 1.6;
            text-align: justify; border-top: 2px solid #eee; padding-top: 20px;
        }
        /* Gestion du HTML de Calibre */
        .synopsis p { margin-bottom: 15px; }

        /* --- RESPONSIVE MOBILE --- */
        @media (max-width: 600px) {
            .top-section { 
                flex-direction: column; /* On empile verticalement */
                align-items: center; text-align: center; gap: 20px;
            }
            .cover-wrapper { width: 60%; max-width: 200px; }
            .info-wrapper { width: 100%; align-items: center; }
            
            h1 { font-size: 1.5rem; }
            .author { font-size: 1.1rem; }
            .btn-dl-large { width: 100%; margin-top: 20px; }
        }
    </style>
</head>
<body>

<header>
    <a href="/" class="btn-back">← Retour</a>
</header>

<div class="container">
    <div class="top-section">
        <div class="cover-wrapper">
            <img src="/cover/{{.Book.ID}}?path={{.Book.Path}}" class="cover" alt="cover">
        </div>
        <div class="info-wrapper">
            <h1>{{ .Book.Title }}</h1>
            <div class="author">
                <a href="/?author_id={{.Book.AuthorID}}">{{ .Book.Author }}</a>
            </div>
            
            {{ if .Book.Series }}
            <div class="series">
                Série : <a href="/?series_id={{.Book.SeriesID}}">{{ .Book.Series }}</a> 
                - Tome {{ .Book.SeriesIndex }}
            </div>
            {{ end }}

            <a href="/download/{{.Book.ID}}?path={{.Book.Path}}" class="btn-dl-large">
                Télécharger
            </a>
        </div>
    </div>

    <div class="synopsis">
        <h3 style="margin-top:0;">Résumé</h3>
        {{ .Book.Description | safe }}
    </div>
</div>

</body>
</html>